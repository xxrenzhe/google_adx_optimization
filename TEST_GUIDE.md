# 功能测试指南

## 测试前准备
1. 确保开发服务器正在运行：`npm run dev`
2. 访问 http://localhost:3000
3. 打开浏览器开发者工具（F12）

## 测试步骤

### 1. 测试无数据状态
- **预期**：所有页面显示"请先上传数据文件"的提示
- **检查点**：
  - 上传数据tab：不应有"当前文件"模块
  - 数据分析tab：显示上传提示
  - 高级分析tab：显示上传提示
  - 决策提醒tab：显示上传提示
  - 预测分析tab：显示上传提示
  - 自动化tab：显示上传提示

### 2. 测试文件上传
- **操作**：上传 test-sample.csv 文件
- **预期**：
  - 显示上传进度
  - 完成后显示"分析完成"
  - 显示分析结果（样式数据模块）
- **检查点**：
  - 总收入、展示次数等概览数据
  - 网站收益排行
  - 国家/地区收益排行
  - 数据样本表格

### 3. 测试Tab切换
- **操作**：在不同tab之间切换
- **预期**：数据保持显示，不消失
- **检查点**：
  - 切换到"数据分析"：数据正常显示
  - 切换到"高级分析"：数据正常显示
  - 切换回"上传数据"："当前文件"模块仍然存在

### 4. 测试页面刷新
- **操作**：按F5或Ctrl+R刷新页面
- **预期**：所有数据被清除，回到无数据状态
- **检查点**：
  - "当前文件"模块消失
  - 所有tab显示上传提示
  - localStorage中的upload-optimized相关数据被清除

### 5. 测试重新上传
- **操作**：再次上传文件（相同或不同文件）
- **预期**：清除旧数据，显示新文件的分析结果
- **检查点**：
  - 旧数据被立即清除
  - 新文件分析完成后显示新结果

### 6. 验证API行为
打开开发者工具的Network标签，检查：
- `/api/analytics` 没有fileId时返回404和空数据
- 其他analytics API类似
- 有fileId时返回正确的分析数据

## 注意事项
- 每次刷新页面后都需要重新上传文件
- 上传新文件时会自动清除旧文件的数据
- 确保所有组件在没有fileId时都不显示历史数据